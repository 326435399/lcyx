<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="UTF-8">
        <meta name="StrawBear" content="width=device-width,initial-scale=1.0">
        <title>计算机图形学原理与实践-XAML</title>
        <link rel="stylesheet" href="../../../1_CSS/basicStyle.css">
    </head>   
    <body>
        <aside>
            <ul>
                <li><a href="#1">1 绪论</a>
                    <ul>
                        <li><a href="#1.1">1.1 计算机图形学简介</a></li>
                        <li><a href="#1.2">1.2 简要历史</a></li>
                        <li><a href="#1.3">1.3 一个光照的例子</a></li>
                        <li><a href="#1.4">1.4 目标,资源和适度的抽象</a></li>
                        <li><a href="#1.5">1.5 图形学中的常数和一些参数值的量级</a></li>
                        <li><a href="#1.6">1.6 图形管线</a></li>
                        <li><a href="#1.7">1.7 图形学与艺术,设计,感知的关系</a></li>
                        <li><a href="#1.8">1.8 基本图形系统</a></li>
                        <li><a href="#1.9">1.9 视为黑盒的多边形绘制</a></li>
                        <li><a href="#1.10">1.10 图形系统中的交互</a></li>
                        <li><a href="#1.11">1.11 不同类型的图形应用</a></li>
                        <li><a href="#1.12">1.12 不同类型的图形包</a></li>
                        <li><a href="#1.13">1.13 构建真实感绘制模块:概述</a></li>
                        <li><a href="#1.14">1.14 学习计算机图形学</a></li>
                    </ul>
                </li>
                <li><a href="#2">2 2D图形学简介-基于WPF</a>
                    <ul>
                        <li><a href="#2.1">2.1 引言</a></li>
                        <li><a href="#2.2">2.2 2D图形流水线概述</a></li>
                        <li><a href="#2.3">2.3 2D图形平台的演变</a></li>
                        <li><a href="#2.4">2.4 使用WPF定义2D场景</a></li>
                        <li><a href="#2.5">2.5 用WPF实现的2D图形动态显示</a></li>
                        <li><a href="#2.6">2.6 支持各种形状系数</a></li>
                    </ul>
                </li>
                <li><a href="#3">3 一个古老的绘制器</a>
                    <ul>
                        <li><a href="#3.1">3.1 一幅丟勒的木刻画</a></li>
                        <li><a href="#3.2">3.2 可见性</a></li>
                        <li><a href="#3.3">3.3 实现</a></li>
                        <li><a href="#3.4">3.4 程序</a></li>
                        <li><a href="#3.5">3.5 局限性</a></li>
                    </ul>
                </li>
                <li><a href="#4">4 2D图形测试平台</a>
                    <ul>
                        <li><a href="#4.1">4.1 引言</a></li>
                        <li><a href="#4.2">4.2 测试平台的细节</a></li>
                        <li><a href="#4.3">4.3 C#代码</a></li>
                        <li><a href="#4.4">4.4 动画</a></li>
                        <li><a href="#4.5">4.5 交互</a></li>
                        <li><a href="#4.6">4.6 测试平台的一个应用程序</a></li>
                    </ul>
                </li>
                <li><a href="#5">5 人类视觉感知简介</a>
                    <ul>
                        <li><a href="#5.1">5.1 引言</a></li>
                        <li><a href="#5.2">5.2 视觉系统</a></li>
                        <li><a href="#5.3">5.3 眼睛</a></li>
                        <li><a href="#5.4">5.4 恒常性及其影响</a></li>
                        <li><a href="#5.5">5.5 延续性</a></li>
                        <li><a href="#5.6">5.6 阴影</a></li>
                    </ul>
                </li>
                <li><a href="#6">6 固定功能的3D图形平台和层次建模简介</a>
                    <ul>
                        <li><a href="#6.1">6.1 引言</a></li>
                        <li><a href="#6.2">6.2 网格和光照属性</a></li>
                        <li><a href="#6.3">6.3 曲面表示和绘制</a></li>
                        <li><a href="#6.4">6.4 WPF中的表面纹理</a></li>
                        <li><a href="#6.5">6.5 WPF反射模型</a></li>
                        <li><a href="#6.6">6.6 基于场景图进行层次建模</a></li>
                    </ul>
                </li>
                <li><a href="#7">7 2D和3D空间职工的基础数学与几何</a>
                    <ul>
                        <li><a href="#7.1">7.1 引言</a></li>
                        <li><a href="#7.2">7.2 记号</a></li>
                        <li><a href="#7.3">7.3 集合</a></li>
                        <li><a href="#7.4">7.4 函数</a></li>
                        <li><a href="#7.5">7.5 坐标</a></li>
                        <li><a href="#7.6">7.6 坐标运算</a></li>
                        <li><a href="#7.7">7.7 直线求交</a></li>
                        <li><a href="#7.8">7.8 更一般的求交计算</a></li>
                        <li><a href="#7.9">7.9 三角形</a></li>
                        <li><a href="#7.10">7.10 多边形</a></li>
                        <li><a href="#7.11">7.11 讨论</a></li>
                    </ul>
                </li>
                <li><a href="#8">8 2D和3D形状的简单表示</a></li>
                <li><a href="#9">9 网格函数</a></li>
                <li><a href="#10">10 2D变换</a></li>
                <li><a href="#11">11 3D变换</a></li>
                <li><a href="#12">12 2D和3D图形变换库</a></li>
                <li><a href="#13">13 相机设定及变换</a></li>
                <li><a href="#14">14 标准化近似和表示</a></li>
                <li><a href="#15">15 光线投射与光栅化</a></li>
                <li><a href="#16">16 实时3D图形平台综述</a></li>
                <li><a href="#17">17 图像表示与操作</a></li>
                <li><a href="#18">18 图像和信号处理</a></li>
                <li><a href="#19">19 图像缩放</a></li>
                <li><a href="#20">20 纹理与纹理映射</a></li>
                <li><a href="#21">21 交互技术</a></li>
                <li><a href="#22">22 样条曲线和细分曲线</a></li>
                <li><a href="#23">23 样条曲面和细分曲面</a></li>
                <li><a href="#24">24 形状的隐式表示</a></li>
                <li><a href="#25">25 网格</a></li>
                <li><a href="#26">26 光</a></li>
                <li><a href="#27">27 材质和散射</a></li>
                <li><a href="#28">28 颜色</a></li>
                <li><a href="#29">29 光线传播</a></li>
                <li><a href="#30">30 概率和蒙特卡洛积分</a></li>
                <li><a href="#31">31 解绘制方程:理论方法</a></li>
                <li><a href="#32">32 绘制实践</a></li>
                <li><a href="#33">33 着色器</a></li>
                <li><a href="#34">34 表意式绘制</a></li>
                <li><a href="#35">35 运动</a></li>
                <li><a href="#36">36 可见性判定</a></li>
                <li><a href="#37">37 空间数据结构</a></li>
                <li><a href="#38">38 现代图形硬件</a></li>
            </ul>
        </aside>
        <nav>
            <a href="#20240507"><img style="width:18pt" src="Resources/other/跳转.jpg" alt="跳转"></a>20240507:球体纹理<br>
            生产的球体因为颜色比较单一看起来并不真实,为了提高场景的真实性,我们引入了<strong>纹理映射</strong>来给地面贴上了草地的纹理,
            然后给了一个HDR天空球纹理,让天空也变得真实起来,最后为了让光照看起来更加自然,引入了<strong>Phong光照模型</strong>,它把物体表面的光照简化成
            <strong>环境光+漫反射光+镜面反射光</strong>. 环境光直接采用了Unity提供的球谐光照,漫反射通过Lambert余弦计算,
            镜面反射采用phong模型,最后得到了自然的光照效果,球面上反射着地面的青草颜色和泥土的褐色<br>
            <a href="#20240513"><img style="width:18pt" src="Resources/other/跳转.jpg" alt="跳转"></a>20240513:笛卡尔的仿真工具<br>
            数学模型的介绍,空间之神<strong>笛卡尔</strong>坐标系,在当中系数为1的组合称为<strong>仿射组合</strong>,具有空间稳固性,在不同空间之间结果不变<br>
            利用这个特性创造的第一个有用的工具就是<strong>线性插值</strong><br>
            <a href="#20240514"><img style="width:18pt" src="Resources/other/跳转.jpg" alt="跳转"></a>20240514:向量的世界<br>
            笛卡尔空间当中,<strong>向量</strong>是漂浮在天空中的红色箭头,它有长度和方向,可以出现在空间中的任意点,任何向量可以由<strong>基向量</strong>线性组成,
            我们把长度为1的向量称之为<strong>单位向量</strong>,向量之间总是通过<strong>点积</strong>转换成标量脱离空间,通过<strong>叉乘</strong>跳出当前维度<br>


        </nav>
        <header><p class="header">计算机图形学原理与实践-XAML</p></header>
        <article id="1"><p class="chapter">1 绪论</p>
            <section id="1.1"><p class="section">1.1 计算机图形学简介</p></section>
            <section id="1.2"><p class="section">1.2 简要历史</p></section>
            <section id="1.3"><p class="section">1.3 一个光照的例子</p></section>
            <section id="1.4"><p class="section">1.4 目标,资源和适度的抽象</p></section>
            <section id="1.5"><p class="section">1.5 图形学中的常数和一些参数值的量级</p></section>
            <section id="1.6"><p class="section">1.6 图形管线</p></section>
            <section id="1.7"><p class="section">1.7 图形学与艺术,设计,感知的关系</p></section>
            <section id="1.8"><p class="section">1.8 基本图形系统</p></section>
            <section id="1.9"><p class="section">1.9 视为黑盒的多边形绘制</p></section>
            <section id="1.10"><p class="section">1.10 图形系统中的交互</p></section>
            <section id="1.11"><p class="section">1.11 不同类型的图形应用</p></section>
            <section id="1.12"><p class="section">1.12 不同类型的图形包</p></section>
            <section id="1.13"><p class="section">1.13 构建真实感绘制模块:概述</p></section>
            <section id="1.14"><p class="section">1.14 学习计算机图形学</p></section>
        </article>
        <article id="2"><p class="chapter">2 2D图形学简介-基于WPF</p>
            <section id="2.1"><p class="section">2.1 引言</p></section>
            <section id="2.2"><p class="section">2.2 2D图形流水线概述</p></section>
            <section id="2.3"><p class="section">2.3 2D图形平台的演变</p></section>
            <section id="2.4"><p class="section">2.4 使用WPF定义2D场景</p></section>
            <section id="2.5"><p class="section">2.5 用WPF实现的2D图形动态显示</p></section>
            <section id="2.6"><p class="section">2.6 支持各种形状系数</p></section>
        </article>
        <article id="3"><p class="chapter">3 一个古老的绘制器</p>
            <section id="3.1"><p class="section">3.1 一幅丟勒的木刻画</p></section>
            <section id="3.2"><p class="section">3.2 可见性</p></section>
            <section id="3.3"><p class="section">3.3 实现</p></section>
            <section id="3.4"><p class="section">3.4 程序</p></section>
            <section id="3.5"><p class="section">3.5 局限性</p></section>
        </article>
        <article id="4"><p class="chapter">4 2D图形测试平台</p>
            <section id="4.1"><p class="section">4.1 引言</p></section>
            <section id="4.2"><p class="section">4.2 测试平台的细节</p></section>
            <section id="4.3"><p class="section">4.3 C#代码</p></section>
            <section id="4.4"><p class="section">4.4 动画</p></section>
            <section id="4.5"><p class="section">4.5 交互</p></section>
            <section id="4.6"><p class="section">4.6 测试平台的一个应用程序</p></section>
        </article>
        <article id="5"><p class="chapter">5 人类视觉感知简介</p>
            <section id="5.1"><p class="section">5.1 引言</p></section>
            <section id="5.2"><p class="section">5.2 视觉系统</p></section>
            <section id="5.3"><p class="section">5.3 眼睛</p></section>
            <section id="5.4"><p class="section">5.4 恒常性及其影响</p></section>
            <section id="5.5"><p class="section">5.5 延续性</p></section>
            <section id="5.6"><p class="section">5.6 阴影</p></section>
        </article>
        <article id="6"><p class="chapter">6 固定功能的3D图形平台和层次建模简介</p>
            <section id="6.1"><p class="section">6.1 引言</p></section>
            <section id="6.2"><p class="section">6.2 网格和光照属性</p></section>
            <section id="6.3"><p class="section">6.3 曲面表示和绘制</p></section>

            <p class="timeStamp" id="20240507">20240507学习</p>
            <section id="6.4"><p class="section">6.4 WPF中的表面纹理</p>                                
                <div>
                    <p class="paragraph">引入</p>
                    <p>
                        <figure>
                            <img src="Resources/img/6-4-0-1-WPF的纹理映射.png" alt="WPF的纹理映射">
                            <p>
                                引入:什么是最有效的逼近真实的技巧?那肯定是纹理映射,纹理相当于一张可伸缩的接触式印相纸覆盖到物体的表面,我们需要确定物体上每个顶点对应到纹理的位置,其余位置则通过插值得到.<br>
                            </p>
                        </figure>
                        <figure>
                            <img src="Resources/img/6-4-0-2-WPF的纹理映射代码.png" alt="WPF的纹理映射代码">
                            <p>
                                1.指定漫反射材质笔刷;<br>
                                2.指定模型的顶点和UV位置对应;<br>
                                3.实例化模型对象;<br>
                                结果是一个无限拉伸的纹理,依然是失真的,这就引出来两种拉伸策略<br>
                            </p>
                        </figure>
                    </p>
                    
                    <p class="paragraph">6.4.1 基于分片拼接的纹理映射</p>
                    <p>
                        <figure>
                            <img src="Resources/img/6-4-1-1-拼贴纹理.png" alt="拼贴纹理">
                            <p>
                                需要时无缝贴图,通过重复铺贴实现的结果<br>
                            </p>
                        </figure>
                    </p> 
                    <p class="paragraph">6.4.2 基于拉伸的纹理映射</p>
                    <p>
                        <figure>
                            <img src="Resources/img/6-4-2-1-拉伸天空.png" alt="拉伸天空">
                            <p>
                                针对那些大块的纹理,往往会用合适的模型进行拉伸,这里采用的就是圆柱+拉伸纹理制作的天空<br>
                            </p>
                        </figure>
                    </p> 
                </div>
            </section>
            <section id="6.5"><p class="section">6.5 WPF反射模型</p>
                <div>
                    <p class="paragraph">6.5.1 颜色设置</p>
                    <p>
                        概念:颜色用来描述多个属性:光波的光谱分布,表面反射的不同波长光的数量以及人们观察该物体时的感知.<br>
                        思考:在描述一个场景的时候,我们需要指定光源的颜色和物体本身的颜色<br>
                    </p>
                    <p class="paragraph">6.5.2 光源几何</p>
                    <p>
                        简化:WPF简化了光源,提供了两种光源,点光源和聚光灯,点光源均匀的球形发散衰减,聚光灯锥形衰减.<br>
                    </p>
                    <p class="paragraph">6.5.3 phong模型光照</p>
                    <p>
                        <figure>
                            <img src="Resources/img/6-4-3-1-phong模型.png" alt="phong模型">
                            <p>
                                采用了Phong光照模型:泛光+漫反射+镜面反射来近似光照效果<br>
                            </p>
                        </figure>
                    </p>
                </div>
            </section>
            <section id="6.6"><p class="section">6.6 基于场景图进行层次建模</p>
                <div>
                    层次化建模并不是我需要学习的重点,知道有这个建模概念即可<br>
                </div>
            </section>
        </article>
        <p class="timeStamp" id="20240513">20240513学习</p>
        <article id="7"><p class="chapter">7 2D和3D空间职工的基础数学与几何</p>
            <section id="7.1"><p class="section">7.1 引言</p>
                <div>
                    将数学知识都安排在这一章是为了温故知新.<br>
                    实现原则:如果你对一个数学问题的理解足够透彻,则一定可以写一个程序实现它,一个好的程序一定是可以重用的.<br>
                </div>
            </section>
            <section id="7.2"><p class="section">7.2 记号</p>
                <div>
                    变量用斜体字母表示,向量和矩阵用加粗斜体字母,向量用小写,矩阵用大写.<br>
                    R表示实数集合,C表示复数集合,R+代表正实数集合,R0+表示非负实数集合.<br>
                </div>
            </section>
            <section id="7.3"><p class="section">7.3 集合</p>
                <div>
                    把BxC读作B叉乘C,但是称为"笛卡尔"乘积,而不是叉积.<br>
                </div>
            </section>
            <section id="7.4"><p class="section">7.4 函数</p>
                <div>
                    <figure>
                        <img src="Resources/img/07-4-1-函数定义.png" alt="函数定义">
                        <p>
                            f是函数的名称,第一个:后的两个集合,箭头左侧为定义域,右侧为陪域.第二个:后的则是定义域到陪域的映射规则.<br>
                        </p>
                    </figure>
                    <figure>
                        <img src="Resources/img/07-4-2-对应关系.png" alt="对应关系">
                        <p>
                            满射:所有陪域的值都有对应关系<br>
                            单射:每个定义域的值只有唯一对应的陪域值,但是还有一些陪域的值没有对应<br>
                            双射:定义域和培域有一一对应关系,这样的函数才可逆<br>
                        </p>
                    </figure>
                    如果θ在大于-π小于π范围内,atan2(sinθ,cosθ)=θ,这个函数常用于在已知x,y值的情况下求角度<br>
                </div>
            </section>
            <section id="7.5"><p class="section">7.5 坐标</p>
                <div>
                    <figure>
                        <img src="Resources/img/07-5-1-坐标系.png" alt="坐标系">
                        <p>
                            点P在黑色坐标系的值是3,5,在灰色坐标系则是2,2
                            直线l在黑色坐标系的方程是y=5,在灰色坐标系则是x+y=4
                            无论是点的坐标还是直线的方程都是依赖于坐标系的选定的.
                        </p>
                    </figure>
                </div>
            </section>
            <section id="7.6"><p class="section">7.6 坐标运算</p>
                <div>
                    <figure>
                        <img src="Resources/img/07-6-1-仿射组合.png" alt="仿射组合">
                        <p>
                            各项系数之和为1的组合称之为仿射组合,结果在不同坐标系下具有不变性.<br>
                        </p>
                    </figure>
                    <figure>
                        <img src="Resources/img/07-6-2-插值.png" alt="插值">
                        <p>
                            线性插值函数,利用了仿射组合,1-a和a两个系数的和始终为1<br>
                            思考:当我们改变坐标系的时候,长度,角度和面积是否不变?如果会变的话要如何限制才能不变?<br>
                        </p>
                    </figure>
                    <p class="timeStamp" id="20240514">20240514学习</p>
                    <p class="paragraph">7.6.1 向量</p>
                    <p>
                        <figure>
                            <img src="Resources/img/07-06-03-基向量.png" alt="基向量">
                            <p>
                                坐标向量:由一组实数组成,n维向量是n个数的序列.<br>
                                矩阵:双下标两个维度的实数阵列Mij,下标ij表示对应i行j列的元素.<br>
                                转置矩阵:交换矩阵的行和列,记作A<sup>T</sup><br>
                            </p>
                        </figure>
                    </p>
                    <p class="paragraph">7.6.2 如何理解向量</p>
                    <p>
                        <figure>
                            <img src="Resources/img/07-06-04-向量.png" alt="向量">
                            <p>
                                向量的说法:空间中的有向线段,位移<br>
                            </p>
                        </figure>
                    </p>
                    <p class="paragraph">7.6.3 向量长度</p>
                    <p>
                        我们把长度为1的向量称为<strong>单位向量.</strong><br>
                        向量的<strong>长度</strong>是其所有分量平方和的平方根.<br>
                        通过向量除以长度使得向量转换为单位向量的过程叫做<strong>归一化</strong>.<br>
                    </p>
                    <p class="paragraph">7.6.4 向量运算</p>
                    <p>
                        线性组合:仅仅加法和标量乘法的组合<br>
                        一个非零向量的线性组合是包含他的直线<br>
                        两个不在一条线上非零向量的线性组合是包含这两个向量的平面<br>
                        <figure>
                            <img src="Resources/img/07-06-05-叉积.png" alt="叉积">
                            <p>
                                叉积:计算垂直与当前向量的另外一个向量<br>
                                物理:两个向量形成的面积大小的长度在垂直方向上,符合右手定则<br>
                            </p>
                        </figure>
                        <figure>
                            <img src="Resources/img/07-06-06-点积.png" alt="点积">
                            <p>
                                点积:判断两个向量之间的相似程度<br>
                                物理:投影长度乘以投影目标长度<br>
                            </p>
                        </figure>
                    </p>
                </div>
            </section>
            <section id="7.7"><p class="section">7.7 直线求交</p></section>
            <section id="7.8"><p class="section">7.8 更一般的求交计算</p></section>
            <section id="7.9"><p class="section">7.9 三角形</p></section>
            <section id="7.10"><p class="section">7.10 多边形</p></section>
            <section id="7.11"><p class="section">7.11 讨论</p></section>
        </article>
        <article id="8"><p class="chapter">8 2D和3D形状的简单表示</p>
            <section id="8.1"></section>
        </article>
        <article id="9"><p class="chapter">9 网格函数</p>
            <section id="9.1"></section>
        </article>
        <article id="10"><p class="chapter">10 2D变换</p>
            <section id="10.1"></section>
        </article>
        <article id="11"><p class="chapter">11 3D变换</p>
            <section id="11.1"></section>
        </article>
        <article id="12"><p class="chapter">12 2D和3D图形变换库</p>
            <section id="12.1"></section>
        </article>
        <article id="13"><p class="chapter">13 相机设定及变换</p>
            <section id="13.1"></section>
        </article>
        <article id="14"><p class="chapter">14 标准化近似和表示</p>
            <section id="14.1"></section><p></p>
        </article>
        <article id="15"><p class="chapter">15 光线投射与光栅化</p>
            <section id="15.1"></section><p></p>
        </article>
        <article id="16"><p class="chapter">16 实时3D图形平台综述</p>
            <section id="16.1"></section><p></p>
        </article>
        <article id="17"><p class="chapter">17 图像表示与操作</p>
            <section id="17.1"></section><p></p>
        </article>
        <article id="18"><p class="chapter">18 图像和信号处理</p>
            <section id="18.1"></section><p></p>
        </article>
        <article id="19"><p class="chapter">19 图像缩放</p>
            <section id="19.1"></section><p></p>
        </article>
        <article id="20"><p class="chapter">20 纹理与纹理映射</p>
            <section id="20.1"></section><p></p>
        </article>
        <article id="21"><p class="chapter">21 交互技术</p>
            <section id="21.1"></section><p></p>
        </article>
        <article id="22"><p class="chapter">22 样条曲线和细分曲线</p>
            <section id="22.1"></section><p></p>
        </article>
        <article id="23"><p class="chapter">23 样条曲面和细分曲面</p>
            <section id="23.1"></section><p></p>
        </article>
        <article id="24"><p class="chapter">24 形状的隐式表示</p>
            <section id="24.1"></section><p></p>
        </article>
        <article id="25"><p class="chapter">25 网格</p>
            <section id="25.1"></section><p></p>
        </article>
        <article id="26"><p class="chapter">26 光</p>
            <section id="26.1"></section><p></p>
        </article>
        <article id="27"><p class="chapter">27 材质和散射</p>
            <section id="27.1"></section><p></p>
        </article>
        <article id="28"><p class="chapter">28 颜色</p>
            <section id="28.1"></section><p></p>
        </article>
        <article id="29"><p class="chapter">29 光线传播</p>
            <section id="29.1"></section><p></p>
        </article>
        <article id="30"><p class="chapter">30 概率和蒙特卡洛积分</p>
            <section id="30.1"></section><p></p>
        </article>
        <article id="31"><p class="chapter">31 解绘制方程:理论方法</p>
            <section id="31.1"></section><p></p>
        </article>
        <article id="32"><p class="chapter">32 绘制实践</p>
            <section id="32.1"></section><p></p>
        </article>
        <article id="33"><p class="chapter">33 着色器</p>
            <section id="33.1"></section><p></p>
        </article>
        <article id="34"><p class="chapter">34 表意式绘制</p>
            <section id="34.1"></section><p></p>
        </article>
        <article id="35"><p class="chapter">35 运动</p>
            <section id="35.1"></section><p></p>
        </article>
        <article id="36"><p class="chapter">36 可见性判定</p>
            <section id="36.1"></section><p></p>
        </article>
        <article id="37"><p class="chapter">37 空间数据结构</p>
            <section id="37.1"></section><p></p>
        </article>
        <article id="38"><p class="chapter">38 现代图形硬件</p>
            <section id="38.1"></section><p></p>
        </article>
        <footer><a href="../../../../index.html">首页</a></footer>
        <script>
                // 读取存储的滚动位置并滚动到该位置  
            const scrollPositionKey = 'scrollPosition';  // 定义滚动位置变量
            const storedScrollPosition = localStorage.getItem(scrollPositionKey); // localStorage是存在用户设备上
            
            window.onload = function()  // 读取窗口的时候就回滚到上次位置
            {
                if (storedScrollPosition)  // 如果滚动位置存在 
                {  
                    window.scrollTo(0, parseInt(storedScrollPosition)); // 滚动到这个位置 
                } 
            } 
            
            // 监听滚动事件并存储位置  
            window.addEventListener('scroll', () => 
            {  
                const scrollPosition = window.scrollY || window.pageYOffset || document.body.scrollTop + (document.documentElement && document.documentElement.scrollTop || 0);  
                localStorage.setItem(scrollPositionKey, scrollPosition);  
            });
        </script>
    </body>
</html>